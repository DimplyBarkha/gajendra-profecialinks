singleRecord: false
regionsSelector: null
recordSelector: null
recordXPath: //div[contains(@data-automation,'product-results')]//div[contains(@data-automation,'product')] | //div[@id='ii_products']
fields:
  - name: productUrl
    singleValue: false
    xpath: //a/@href[contains(.,'/ip/')] | //div[@id='ii_producturl']
    regExp: (/ip/.+)
    regExpReplace: https://www.walmart.ca/en$1
    description: The URL for the product details page
  - name: thumbnail
    singleValue: false
    xpath: //img/@src | //div[@id='ii_images']
    description: The URL for the product thumbnail image
  - name: name
    singleValue: false
    xpath: //p[contains(@data-automation,'name')] | //div[@id='ii_name']
    description: The product name
  - name: gtin
    manualSelector: div[id='ii_upc']
    description: GTIN code (includes UPC/EAN)
  - name: reviewCount
    singleValue: false
    xpath: //div[contains(@data-automation,'star-rating-wrapper')] | //div[@id='ii_ratingCount']
    regExp: (\d{1,})
    regExpReplace: $1
    description: The number of reviews
  - name: price
    singleValue: false
    xpath: //span[contains(@data-automation,'current-price')] | //div[@id='ii_productCurrentPrice']
    description: The offered price for the product
  - name: rank
    singleValue: false
    description: search/listing rank
  - name: rankOrganic
    singleValue: false
    description: The position (rank) within the list excluding sponsored/paid results
  - name: id
    singleValue: false
    xpath: //div[contains(@data-automation,'product')]/@data-product-id | //div[@id='ii_id']
    description: Unique id (within this extractor
  - name: aggregateRating2
    singleValue: false
    xpath: //div[contains(@data-automation,'rating-stars')]/@aria-label | //div[@id='ii_averageRating']
    description: The stated aggregate rating normalized to be out of 5
    regExp: (?:([\d]+(?:.[\d]+)?)?)
    regExpReplace: $1 
  - name: searchUrl
    xpath: ancestor::html//div[@id='search-url'][last()]
    # regExp: (^[^#]*)
    # regExpReplace: $1
    