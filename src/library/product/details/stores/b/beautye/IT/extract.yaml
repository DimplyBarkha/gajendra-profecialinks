# 
singleRecord: true
regionsSelector: null
recordSelector: null
recordXPath: null
fields:
  - name: image
    singleValue: false
    xpath: //meta[@property="og:image"]/@content    
  - name: imageAlt
    singleValue: false
    xpath: //div[@class="fotorama__stage__frame fotorama__active fotorama_vertical_ratio fotorama__loaded fotorama__loaded--img"]//img/@alt
  - name: alternateImages
    singleValue: false
    #xpath: //div[@data-nav-type="thumb"][position()>1]/div//img/@src
    #xpath: //div[contains(@class,"magnify-wheel-loaded")]/@href | //div[contains(@class,"fotorama__thumb fotorama_horizontal_ratio")]//img/@src
    xpath: //div[@class="fotorama__nav__frame fotorama__nav__frame--thumb"]//div/img/@src 
    
  - name: metaKeywords
    singleValue: false
    xpath: //meta[@name="keywords"]/@content
  - name: category
    singleValue: false
    xpath: //div[@class="box-tocart"]//button/@data-category
    # for IM : //ul[contains(@class,"items")]/li[contains(@class,"category")]
  - name: nameExtended
    singleValue: false
    xpath: //h1[@class="page-title"]/span | //div[@itemprop="description"] | //div[contains(@id,"pd_description_add")]
    #xpath: //meta[@name="title"]/@content 
    #xpath: //div[@class="fotorama__caption__wrap"][1] | //div[@itemprop="description"]
    # xpath: concat(//span[@class='brand-no-link'],' ',//div[@class='fotorama__caption__wrap'][1])
  - name: listPrice
    singleValue: false
    xpath: //span[@data-price-type="oldPrice"]//span[@class="price"]
    #xpath: //div[contains(@class,"swatch-option")]//div[contains(@class,"custom-option-price")]/text()
  - name: price
    singleValue: false
    xpath: //span[@data-price-type="finalPrice"]//span[@class="price"]
    #xpath: //div[contains(@class,"swatch-option")]//div[contains(@class,"custom-option-finalprice")]/text()
  - name: availabilityText
    singleValue: false
    xpath: //div[@class="stock available"]/span/text()
    regExp: (.+)
    regExpReplace: In Stock
    defaultValue: Out of Stock
  - name: description
    singleValue: false
    xpath: //span[contains(text(),"Descrizione")]//..//..//following-sibling::div[1][@data-role="content"]
  - name: directions
    singleValue: false
    xpath: //span[contains(text(),"Consigli")]//..//..//following-sibling::div[1][@data-role="content"]    
  - name: brandText
    singleValue: false
    xpath: //span[contains(@id,"new_brand_name")]
    #| //div[@class="product_logo_link"]//img/@src
    # //span[@class="brand-no-link"]
  - name: quantity
    singleValue: false
    xpath: //div[contains(@class,"swatch-option") and contains(@aria-checked,"true")]//div[@class="custom-option-label col-4"][contains(text(),"ml")]
  - name: gtin
    singleValue: false
    #xpath: //div[@class="price-box price-final_price"]/@data-product-id
    xpath:
  - name: sku
    singleValue: false
    xpath: //meta[@itemprop="sku"]/@content
    # regExp: conf_([^"]+)
    # regExpReplace: $1
  - name: variantId
    singleValue: false
    xpath: //div[contains(@id,"pd_vairiant_id")] | //meta[@itemprop="sku"]/@content
    #regExp: conf_([^"]+)
    #regExpReplace: $1
    #xpath: //div[@class="fotorama__caption__wrap"]/@id
    # regExp: labelledby(.+)
    # regExpReplace: $1
  - name: mpc
    singleValue: false
    description: The manufacturer model code (unique) of the product
  - name: secondaryImageTotal
    singleValue: false
    xpath: count(//div[@class="fotorama__nav__frame fotorama__nav__frame--thumb"]//div/img/@src) 
  - name: name
    singleValue: false
    xpath: //h1[@class="page-title"]/span
    # //div[@class="fotorama__caption__wrap"][1]
  - name: promotion
    singleValue: false
    xpath: //div[contains(@class,"swatch-option") and contains(@aria-checked,"true")]//div[@class="custom-option-sale"]
  - name: variantInformation
    singleValue: false
    # xpath: //div[contains(@class,"swatch-attribute")]/@attribute-code
    xpath: //div[contains(@id,"pd_description_add")]
  - name: ingredientsList
    singleValue: false
    xpath: //span[contains(text(),"Ingredienti")]//..//..//following-sibling::div[1][@data-role="content"]
  - name: customerServiceAvailability
    singleValue: false
    description: Information related to customer service availability (text), ['Yes','No']
    defaultValue: Yes
  - name: variantCount
    singleValue: false
    xpath: count(//div[@role="listbox"]/div)
    defaultValue: 0    
  - name: variants
    singleValue: false
    # xpath: //div[@role="listbox"]/div/@option-id  
    xpath: //script[@data-ommit="true"][contains(text(),"AEC.CONFIGURABLE_SIMPLES")]/text()
    regExp: id\W\W\W(\d{5,})
    regExpReplace: $1
  - name: firstVariant
    singleValue: true
    # xpath: //div[@role="listbox"]/div[1]/@option-id
    xpath: //link[@rel="canonical"]/@href
    regExp: \d{5,}
    # regExpReplace: $1