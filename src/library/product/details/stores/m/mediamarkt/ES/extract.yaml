# extends: ../TR/extract
singleRecord: true
regionsSelector: null
recordSelector: null
recordXPath: null
fields:
  - name: shippingDimensions
    xpath: //td[contains(.,"Tamaño embalaje")]/following-sibling::td[1]
  - name: energyEfficiency
    xpath: (//td[contains(.,"Eficiencia energética")]/following-sibling::td[1])[1]
  - name: color
    xpath: //td[contains(.,"Color")]/following-sibling::td[1]
  - name: quantity
    xpath: //td[contains(.,"pulgadas")]/following-sibling::td[1]
  - name: _input
    xpath: //meta[@property="og:url"]/@content
    regExp: (.+-)(\d+)(.htm.+)
    regExpReplace: $2
  - name: productUrl
    xpath: //meta[@property="og:url"]/@content
  - name: hasComparisonTable
    xpath: //div[@class="inpage_selector_comparison"]//div[contains(@class,'h2')]
    regExp: (.+)
    regExpReplace: Yes

  - name: availabilityText
    xpath: //script[@type="application/ld+json"][contains(text(),'availability":"http://schema.org/InStock"')]
    regExp: (.+)
    regExpReplace: In Stock
    defaultValue: Out Of Stock
  - name: nameExtended
    xpath: (//div[contains(@data-test,"mms-select-details-header")]//h1)[1]
  - name: name
    xpath: (//div[contains(@data-test,"mms-select-details-header")]//h1)[1]
  - name: price
    xpath: (//div[contains(@class,"Pricestyled__BrandedPrice")]//span[@font-family="price"])[1]
  - name: listPrice
    xpath: (//div[contains(@class,"StrikeThrough__StyledStrikeThrough")])[1]
  - name: promotion
    xpath: //span[contains(@class,"DiscountLabelstyled__StyledDiscountLabel")]
  - name: image
    description: URL of the main product image
    xpath: //div[contains(@class,"Gallerystyled__StyledGallerySlider")]//ul/li[1]//img/@src
  - name: imageAlt
    description: Alt text of the main product image
    xpath: //div[contains(@class,"Gallerystyled__StyledGallerySlider")]//ul/li[1]//img/@alt
  - name: alternateImages
    description: Other product images (not in manufacturer description)
    xpath: //div[contains(@class,"Gallerystyled__StyledGallerySlider")]//ul//li[position()>1]//img/@src
  - name: metaKeywords
    description: The <meta> keywords content
    xpath: //meta[@name="keywords"]/@content
  - name: category
    description: The categories (e.g. from breadcrumbs)
    xpath: //ul[contains(@class,"Breadcrumbstyled__StyledUl")]//li/a[not(@aria-label="home-link")
  - name: brandText
    singleValue: false
    xpath: //script[@type="application/ld+json"][contains(text(),"brand")]
    regExp: brand":{"@type":"[^"]+","name":"([^"]+)
    regExpReplace: $1
  - name: manufacturer
    description: Product manufacturer
    xpath: //span[contains(@class,"DetailsHeader__StyledHeaderInfo")]//a
  - name: quantity
    description: Quantity as described on the page
    xpath: 
  - name: weightNet
    description: Net weight as described on the page
    xpath: //td[contains(.,"Peso") and not(contains(.,"Peso embalado"))]/following-sibling::td[1]
  - name: weightGross
    description: Gross weight as described on the page
    xpath: //td[contains(.,"Peso embalado")]/following-sibling::td[1]
  - name: gtin
    singleValue: false
    xpath: //script[@type="application/ld+json"][contains(text(),"gtin")]
    regExp: gtin13":"([^"]+)
    regExpReplace: $1
  - name: eangtin
    xpath: //script[@type="application/ld+json"][contains(text(),"gtin")]
    regExp: gtin13":"([^"]+)
  - name: sku
    description: The store-specific product identifier
    xpath: //script[@type="application/ld+json"][contains(text(),"sku")]
    regExp: sku":"([^"]+)
    regExpReplace: $1
  - name: variantId
    description: Identifier for a variant from a store where variants share the same sku
    xpath: //script[@type="application/ld+json"][contains(text(),"sku")]
    regExp: sku":"([^"]+)
    regExpReplace: $1
  - name: mpc
    description: The manufacturer model code (unique) of the product
    xpath: (//td[contains(.,"Modelo")]/following-sibling::td[1])[1]
  - name: ratingCount
    description: The number of ratings
    xpath: //div[contains(@class,'StyledAverageRating')]//p
    regExp: (\d+)
    regExpReplace: $1
  - name: aggregateRating
    description: The stated aggregate rating normalized to be out of 5
    xpath: //span[contains(@class,"AverageRatingSummary")]
  - name: variantCount
    description: Number of variants listed
    type: NUMBER
    xpath: count(//div[contains(@class,"ProductVariantsstyled__StyledVariantsColorsSlider")]//ul/li)

  - name: description
    xpath: //div[contains(@class,"ProductDescription__StyledFallbackDescription")]//div | //div[contains(@class,"ProductDescription__StyledFallbackDescription")]//p | //div[contains(@class,"ProductDescription__StyledFallbackDescription")]//h3
    description:
      Product description supplied by website - may be concatenanted from
      multiple places; specifically not the manufacturer description
  - name: descriptionBullets
    description: Number of ul > li tags in the description
    type: NUMBER
  - name: mpc
    description: The manufacturer model code (unique) of the product
    xpath: //span[@itemprop="sku"]


  - name: shippingWeight
    description: Stated shipping weight
    xpath: //td[contains(.,"Peso embalado")]/following-sibling::td[1]
  - name: manufacturerDescription
    description: The extended description of the product supplied by the lister
    xpath: '@aplus-description | //div[@id="flix-inpage"] | //div[@id="rcm-container"] | //div[@id="wrp_cnet"]//div[contains(@id,"inline-content")]'
  - name: manufacturerImages
    description: Images within the third party description
    xpath: '@aplus-images | //div[contains(@class,"inpage_selector_feature") or contains(@class,"inpage_selector_gallery")]//img/@data-flixsrcset | //div[contains(@class,"inpage_selector_feature") or contains(@class,"inpage_selector_gallery")]//img/@data-srcset | //div[contains(@class,"inpage_selector_feature") or contains(@class,"inpage_selector_gallery")]//a/@href[contains(.,"media")] | //div[@id="rcm-container"]//img/@src | //div[@class="flix-tech-spacs"]//img/@data-flixsrcset | //div[@id="wrp_cnet"]//div[@data-media-type="image"]/@data-image-url | //div[@id="wrp_cnet"]//img/@data-large'
  - name: videos
    description: URLs of videos on page
    xpath: //div[@id='added_video']
  - name: galleryVideos

  - name: secondaryImageTotal
    description: null
    type: NUMBER
    xpath: count(//div[contains(@class,"Gallerystyled__StyledGallerySlider")]//ul//li[position()>1]//img/@src)
  - name: specifications
    description: The physical dimensions of the product including packaging.
    xpath: //div[@id='specifications']
  - name: warranty
    description: Guarantee associated with the product
    xpath: //td[contains(.,"Garantisi")]/following-sibling::td[1]

  - name: variantInformation
    description: colour / scent / flavour / other
    # xpath: //div[@id="features"]//dt[contains(.,"Renk:")]/following-sibling::dd[1]
  - name: firstVariant
    description: Unique identifier for a collection of variants. For a subset of
      core feeds (43) we have a column "first_variant" that is populated with a
      common code to link all variants for a product. method 1 (Preferred) = use
      common tag (Could be parent sku) that is same value for all variants of a
      product. method 2 = first_variant method technique, Identify the first
      varient in the sequence and use this rpc to populate "first_variant" for
      all variants of a product, this rpc becomes the common link between other
      variants. method 3 = apply some logic to determine link between variants,
      this will need analysis
    xpath: //script[@type="application/ld+json"][contains(text(),"sku")]
    regExp: sku":"([^"]+)
    regExpReplace: $1
  - name: variants
    description: null
    # xpath: //div[contains(@class,"ProductVariantsstyled")]//ol//li
  - name: additionalDescBulletInfo
  - name: technicalInformationPdfPresent
    description: If there is for example a manual in pdf format on the website. ['Yes','No']
    example: https://www.amazon.de/Hasbro-Spiele-44220100-Mastermind-Kinderspiel/dp/B0007OHUG6
    xpath: //a[contains(@class,"flix-doc-download")] | //div[contains(@class,"inpage_selector_download")]
    regExp: (.+)
    regExpReplace: Yes
    defaultValue: No
  - name: termsAndConditions
    description: Terms and conditions information text ['Yes','No']
    defaultValue: No
  - name: privacyPolicy
    description: Privacy Policy information text ['Yes','No']
    defaultValue: No
  - name: customerServiceAvailability
    description: Information related to customer service availability (text), ['Yes','No']
    defaultValue: No
  - name: Image360Present
    description: If 360 image is present in the carousel ['Yes','No']
    example: https://www.amazon.com/Trinsic-Single-Handle-Magnetic-Champagne-9159-CZ-DST/dp/B0050EN8E6
    defaultValue: No
  - name: imageZoomFeaturePresent
    description: If Zoom feature is available for Main image or images in the
      carousel,['Yes','No']
    example: https://www.zalando.de/adidas-neo-sneaker-low-blackwhite-a4315i002-q11.html
    xpath: //a[@class="zoom"]/@class
    regExp: (.+)
    regExpReplace: Yes
    defaultValue: No
  - name: unInterruptedPDP
    singleValue: false
    xpath: //ul[@class="products-grid"]/li[not(contains(@class,"cloned"))]//div[contains(@class, "base-info")]//h3/a | //li[contains(@class,'dyItem') and not(contains(@class,'slick-cloned'))]//div[@class="dyBaseInfo"]/@data-gtm-name
  - name: inTheBoxUrl
    singleValue: false
    xpath: //div[@id='inTheBoxUrl']
  - name: inTheBoxText
    singleValue: false
    xpath: //div[@id='inTheBoxText']
  - name: hasComparisonTable
    xpath: //div[@class="flix-comp-h2"][contains(.,'Tabla de comparación')]
    regExp: (.+)
    regExpReplace: Yes
    defaultValue: No